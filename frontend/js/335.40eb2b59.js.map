{"version":3,"file":"js/335.40eb2b59.js","mappings":"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","sources":["webpack://sales/./src/components/UI/Loader.vue","webpack://sales/./src/components/UI/Loader.vue?fb91","webpack://sales/./src/views/CabinetView.vue","webpack://sales/./src/views/CabinetView.vue?bf87"],"sourcesContent":["<template>\n    <div class=\"lds-ring\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n    </div>\n</template>\n\n<style>\n.lds-ring {\n    display: block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n}\n\n.lds-ring div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 64px;\n    height: 64px;\n    margin: 8px;\n    border: 8px solid var(--primary-color);\n    border-radius: 50%;\n    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: var(--primary-color) transparent transparent transparent;\n}\n\n.lds-ring div:nth-child(1) {\n    animation-delay: -0.45s;\n}\n\n.lds-ring div:nth-child(2) {\n    animation-delay: -0.3s;\n}\n\n.lds-ring div:nth-child(3) {\n    animation-delay: -0.15s;\n}\n\n@keyframes lds-ring {\n    0% {\n        transform: rotate(0deg);\n    }\n\n    100% {\n        transform: rotate(360deg);\n    }\n}\n</style>","import { render } from \"./Loader.vue?vue&type=template&id=4147a103\"\nconst script = {}\n\nimport \"./Loader.vue?vue&type=style&index=0&id=4147a103&lang=css\"\n\nimport exportComponent from \"/home/trogdor/projects/frontend/sales/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"home container\">\n        <Title title=\"Профиль\" description=\"Добавленные в избранное товары\"></Title>\n        <ProductCardSet :products=\"products\" />\n        <Loader v-show=\"isShowLoader\" ref=\"loader\" class=\"loader\" />\n        <p v-if=\"isLastPage\" class=\"last-page-info error-message\">\n            Больше акций в избранном нет\n        </p>\n        <p v-if=\"!isHasNetwork\" class=\"network-error error-message\">\n            Не удалось загрузить акции\n            <span @click=\"getPosts | (isShowLoader = true) | (isHasNetwork = true)\" class=\"network-error__button\">\n                Попробовать снова?\n            </span>\n        </p>\n        <p v-if=\"!isUserAuth\" lass=\"network-error error-message\">\n            Авторизуйтесь, чтобы добавлять акции в избранное\n        </p>\n    </div>\n</template>\n  \n<style>\n.loader {\n    margin: auto;\n}\n\n.error-message {\n    text-align: center;\n    margin: auto;\n    margin-top: 20px;\n    font-weight: 500;\n    font-size: 20px;\n    padding-bottom: 30px;\n}\n\n.network-error__button {\n    color: var(--primary-color);\n    cursor: pointer;\n}\n</style>\n  \n<script>\nimport ProductCardSet from '@/components/cardSets/ProductCardSet.vue'\nimport LikeService from '@/services/LikeService'\nimport Loader from \"@/components/UI/Loader.vue\"\nimport Title from '@/components/UI/Title.vue'\n\n\nexport default {\n    components: {\n        ProductCardSet,\n        Loader,\n        Title,\n    },\n    data() {\n        return {\n            products: [],\n            page: 1,\n            isShowLoader: true,\n            isLastPage: false,\n            isHasNetwork: true,\n            isUserAuth: true\n        }\n    },\n    methods: {\n        async onLoaderInScreen(event) {\n            if (event[0].isIntersecting) {\n                await this.pushProducts()\n            }\n        },\n        async pushProducts() {\n            const products = await this.getProducts()\n            if (products) {\n                this.products.push(...products)\n                this.page += 1\n            }\n        },\n        async getProducts() {\n            try {\n                const response = await LikeService.getLikes({ page: this.page })\n                if (!response.next | !response.results.length) {\n                    this.isLastPage = true\n                    this.isShowLoader = false\n                }\n                let products = this.convertLikesToProducts(response.results)\n                return products\n            }\n            catch (e) {\n                if (e.code == \"ERR_NETWORK\") {\n                    this.isHasNetwork = false\n                    this.isShowLoader = false\n                }\n                else if (e.response.status === 404) {\n                    this.isLastPage = true\n                    this.isShowLoader = false\n                }\n                else if (e.response.status === 401) {\n                    this.isShowLoader = false\n                    this.isUserAuth = false\n                }\n            }\n        },\n        convertLikesToProducts(likes) {\n            let products = []\n\n            for (let like of likes) {\n                let product = like.product\n                product.is_liked = true\n                products.push(product)\n            }\n\n            return products\n        },\n        reloadProducts() {\n            this.products = []\n            this.page = 1\n            this.isLastPage = false\n            this.isShowLoader = true\n        }\n    },\n    mounted() {\n        const loadingObserver = new IntersectionObserver(this.onLoaderInScreen)\n        loadingObserver.observe(this.$refs.loader.$el)\n    },\n    computed: {\n        currentUser() {\n            return this.$store.state.currentUser\n        },\n        isAuth() {\n            return this.$store.state.isAuth\n        }\n    },\n    watch: {\n        currentUser(newValue, oldValue) {\n            this.reloadProducts()\n        },\n        isAuth(newValue, oldValue) {\n            this.isUserAuth = newValue\n            this.reloadProducts()\n        }\n    }\n}\n</script>\n","import { render } from \"./CabinetView.vue?vue&type=template&id=c739346c\"\nimport script from \"./CabinetView.vue?vue&type=script&lang=js\"\nexport * from \"./CabinetView.vue?vue&type=script&lang=js\"\n\nimport \"./CabinetView.vue?vue&type=style&index=0&id=c739346c&lang=css\"\n\nimport exportComponent from \"/home/trogdor/projects/frontend/sales/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_hoisted_1","_hoisted_6","script","__exports__","render","lass","_createVNode","_component_Title","title","description","_component_ProductCardSet","products","$data","_component_Loader","ref","isShowLoader","isLastPage","isHasNetwork","onClick","_cache","$event","_ctx","getPosts","isUserAuth","components","ProductCardSet","Loader","Title","data","page","methods","async","event","isIntersecting","this","pushProducts","getProducts","push","response","LikeService","next","results","length","convertLikesToProducts","e","code","status","likes","like","product","is_liked","reloadProducts","mounted","loadingObserver","IntersectionObserver","onLoaderInScreen","observe","$refs","loader","$el","computed","currentUser","$store","state","isAuth","watch","newValue","oldValue"],"sourceRoot":""}